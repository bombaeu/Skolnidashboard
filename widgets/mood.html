<div id="mood-widget" class="widget-card">
    <h4>Jak se dnes cÃ­tÃ­Å¡?</h4>
    
    <div class="mood-input-group">
        <input type="date" id="mood-date" class="mood-date-picker">
        <div class="emoji-row">
            <button onclick="saveMood('ğŸ˜„')">ğŸ˜„</button>
            <button onclick="saveMood('ğŸ™‚')">ğŸ™‚</button>
            <button onclick="saveMood('ğŸ˜')">ğŸ˜</button>
            <button onclick="saveMood('ğŸ˜•')">ğŸ˜•</button>
            <button onclick="saveMood('ğŸ˜¡')">ğŸ˜¡</button>
        </div>
    </div>

    <div class="mood-history">
        <h5>PoslednÃ­ch 7 dnÃ­</h5>
        <div id="history-list" class="history-grid"></div>
    </div>

    <style>
        .widget-card { background: rgba(255,255,255,0.1); backdrop-filter: blur(10px); padding: 15px; border-radius: 15px; color: white; font-family: sans-serif; max-width: 300px; }
        .emoji-row { display: flex; justify-content: space-between; margin: 10px 0; }
        .emoji-row button { background: none; border: none; font-size: 1.5rem; cursor: pointer; transition: transform 0.2s; }
        .emoji-row button:hover { transform: scale(1.3); }
        .mood-date-picker { width: 100%; background: rgba(0,0,0,0.2); border: none; color: white; border-radius: 5px; padding: 5px; margin-bottom: 10px; }
        .history-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 5px; margin-top: 10px; font-size: 0.8rem; text-align: center; }
        .history-item { display: flex; flex-direction: column; align-items: center; }
        .history-item span { font-size: 1.2rem; }
    </style>

    <script>
        const dateInput = document.getElementById('mood-date');
        dateInput.valueAsDate = new Date();

        function saveMood(emoji) {
            const moods = JSON.parse(localStorage.getItem('moodHistory') || '{}');
            moods[dateInput.value] = emoji;
            localStorage.setItem('moodHistory', JSON.stringify(moods));
            renderHistory();
        }

        function renderHistory() {
            const list = document.getElementById('history-list');
            const moods = JSON.parse(localStorage.getItem('moodHistory') || '{}');
            list.innerHTML = '';
            
            for (let i = 6; i >= 0; i--) {
                const d = new Date();
                d.setDate(d.getDate() - i);
                const iso = d.toISOString().split('T')[0];
                const dayName = d.toLocaleDateString('cs', {weekday: 'short'});
                
                list.innerHTML += `
                    <div class="history-item">
                        <small>${dayName}</small>
                        <span>${moods[iso] || 'Â·'}</span>
                    </div>`;
            }
        }
        renderHistory();
    </script>
</div>